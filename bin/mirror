#!/bin/sh

set -e

conf=/etc/firehol-mirrors.conf

while read dir repo build
do
  case $dir in
    '#'*)
      :
    ;;
    *)
      if [ -d $dir ]
      then
         cd $dir
         git remote update > /dev/null
      else
         mkdir -p $dir
         cd $dir/..
         rmdir $dir
         git clone --mirror $repo $dir
      fi
    ;;
  esac
done < $conf
